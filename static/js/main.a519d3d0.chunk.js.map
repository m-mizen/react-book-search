{"version":3,"sources":["context/book-search.tsx","styled-components/containers.tsx","components/footer.tsx","styled-components/inputs.tsx","styled-components/buttons.tsx","components/search-bar.tsx","components/stars.tsx","components/book-tile.tsx","components/load-more.tsx","components/search-results.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["BookSearchContext","React","createContext","searchResults","totalResults","search","loadMore","loading","BookSearchContextProvider","props","useState","results","term","state","setState","a","fetch","resp","json","data","items","totalItems","length","Provider","value","children","Container","styled","div","FlexContainer","vertical","FooterContainer","Footer","Date","getFullYear","href","rel","target","Input","input","Button","button","disabled","_unique","Form","form","Label","label","SearchBar","searchTerm","setSearchTerm","id","mobile","window","innerWidth","Consumer","onSubmit","e","event","preventDefault","handleSubmit","htmlFor","type","onChange","onClick","clear","StarsWrap","rated","Stars","rating","percent","ratingStyles","titleText","title","role","style","Tile","BookTitle","h2","BookSubTitle","p","BookThumbnail","img","BookTile","book","volumeInfo","subtitle","averageRating","ratingsCount","imageLinks","thumbnail","src","alt","ratings","LoadMoreEl","LoadMore","BookTiles","ResultsText","NoResultsText","SearchResults","books","map","index","key","Main","H1","h1","AppBody","App","className","Boolean","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","console","message"],"mappings":"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","file":"static/js/main.a519d3d0.chunk.js","sourcesContent":["import React, { useState } from 'react';\n\ntype BookSearchContextProps = {\n  searchResults: any[],\n  totalResults: number,\n  loading: boolean,\n  search: () => void,\n  loadMore: () => void,\n};\n\nconst initialState = {\n  searchResults: [],\n  totalResults: 0,\n  search: () => { },\n  loadMore: () => { },\n  loading: false\n};\n\nexport const BookSearchContext = React.createContext<BookSearchContextProps>(initialState);\n\nconst API_BASE_URL = \"https://www.googleapis.com/books/v1\";\n\nexport const BookSearchContextProvider = (props) => {\n  // This is a poor example of where to use the context API as there is not a deep component heirarchy. However this is a learning exercise so I've chosen to use it here to learn more about the API\n  const [state, setState] = useState({\n    results: [],\n    totalResults: 0,\n    term: '',\n    loading: false\n  });\n\n  const search = async (term) => {\n    if (state.loading) {\n      return;\n    }\n\n    if(!term) {\n      setState({\n        results: [],\n        totalResults: 0,\n        term: '',\n        loading: false,\n      });\n    }\n\n    setState({\n      ...state,\n      loading: true,\n    });\n\n    const resp = await fetch(`${API_BASE_URL}/volumes?maxResults=20&q=${term}`);\n    const data = await resp.json();\n\n    const { items, totalItems } = data;\n    \n    setState({\n      results: items,\n      totalResults: totalItems,\n      term,\n      loading: false,\n    });\n  };\n\n  const loadMore = async () => {\n    if (state.loading) {\n      return;\n    }\n    setState({\n      ...state,\n      loading: true,\n    });\n    const resp = await fetch(`${API_BASE_URL}/volumes?maxResults=20&q=${state.term}&startIndex=${state.results.length}`);\n    const data = await resp.json();\n    const { items } = data;\n    setState({\n      ...state,\n      loading: false,\n      results: [\n        ...state.results,\n        ...items\n      ],\n    });\n  };\n\n  return (\n    <BookSearchContext.Provider value={{\n      results: state.results,\n      totalResults: state.totalResults,\n      loading: state.loading,\n      loadMore,\n      search\n    }}>\n      { props.children}\n    </BookSearchContext.Provider>\n  );\n}","import styled from 'styled-components';\n\nexport const Container = styled.div`\n    margin: 0 auto;\n    max-width: 54rem;\n    padding: 0 1rem;\n    width: 100%;\n`;\n\ntype ContainerProps = {\n    vertical?: boolean;\n}\n\nexport const FlexContainer = styled.div<ContainerProps>`\n    display: flex;\n    flex-direction: ${props => props.vertical ? \"column\" : \"row\"};\n    gap: 1rem;\n`\n\nexport const GridContainer = styled.div`\n    display: grid;\n    gap: 1rem;\n`","import React from 'react';\nimport styled from 'styled-components';\n\nimport { Container } from '../styled-components/containers';\n\nconst FooterContainer = styled.div`\n    text-align: center;\n    background: rgba(255,255,255, 0.1);\n    padding: 1rem 0 1.5rem;\n`\n\nfunction Footer() {\n    return (\n        <FooterContainer>\n            <Container>\n                <p>\n                    &copy;Mark Mizen {(new Date()).getFullYear()}.\n                    Powered by <a href=\"https://developers.google.com/books\" rel=\"noopener noreferrer\" target=\"_blank\">Google Books API</a>.\n                </p>\n            </Container>\n        </FooterContainer>\n    )\n}\n\n\nexport default Footer;","import styled from 'styled-components';\n\nexport const Input = styled.input`\n    border-radius: 2px;\n    background: var(--color-light, #fff);\n    color: var(--color-dark, #000);\n    padding: .25em .5em;\n    border: 1px solid var(--color-border, red);\n    line-height: 1.5;\n    font-size: inherit;\n`;","import styled from 'styled-components';\n\ntype ButtonProps = {\n    disabled?: boolean;\n    size?: 'small' | 'default' | 'large';\n}\n\nexport const Button = styled.button<ButtonProps>`\n    display: block;\n    border-radius: 2px;\n    color: var(--color-light, #fff);\n    border: none;\n    font-size: inherit;\n    background: ${props => props.disabled ? \"var(--color-disabled)\" : \"var(--color-theme)\"};\n    cursor: pointer;\n    padding: .25rem .5rem;\n    &:hover{\n        background-color: var(--color-theme-hover);\n    }\n`;","import React, { useState } from 'react';\nimport styled from 'styled-components';\n\nimport { BookSearchContext } from '../context/book-search';\n\nimport { Input } from '../styled-components/inputs';\nimport { Button } from '../styled-components/buttons';\nimport { FlexContainer } from '../styled-components/containers';\n\nlet _unique = 0;\n\nconst Form = styled.form`\n    font-size: 125%;\n    input {\n        flex: 1;\n        width: 100%;\n        display: block;\n    }\n`;\n\nconst Label = styled.label`\n    display: block;\n    margin-bottom: .25rem;\n    font-size: 1rem;\n    text-align: left;\n`\n\nfunction SearchBar(props) {\n\n    const [searchTerm, setSearchTerm] = useState('');\n\n    const handleSubmit = (event: React.FormEvent<HTMLFormElement>, search: any) => {\n        event.preventDefault();\n        search(searchTerm);\n    };\n\n    const id = `search-${_unique++}`;\n\n    const clear = (event, search) => {\n        event.preventDefault();\n        setSearchTerm('');\n        search('');\n    }\n\n    const mobile = window.innerWidth < 400;\n\n    return (\n        <BookSearchContext.Consumer>\n            {({ search }) => {\n                return <Form \n                    onSubmit={(e) => handleSubmit(e, search)}\n                >\n                    <Label htmlFor={id}>Search term:</Label>\n                    <FlexContainer vertical={mobile}>\n                        <Input\n                            id={id}\n                            type=\"text\"\n                            value={searchTerm}\n                            onChange={event => setSearchTerm(event.target.value)}\n                        />\n                        <Button type=\"submit\">Search</Button>\n                        <Button type=\"reset\" onClick={event => clear(event, search)}>Clear</Button>\n                    </FlexContainer>\n                </Form>\n            }}\n        </BookSearchContext.Consumer>\n    );\n}\n\nexport default SearchBar;","import React from 'react';\nimport styled from 'styled-components';\n\ntype StarsWrapProps = {\n    rated: boolean\n};\n\nconst StarsWrap = styled.div<StarsWrapProps>`\n    position: relative;\n    width: 9ch;\n    text-align: center;\n    height: 1.5rem;\n    color: gold;\n    span {\n        position: absolute;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        top: 0;\n    }\n    ${\n        props => props.rated ? \n            '' : 'color: var(--color-border)'\n    }\n`;\n\nfunction Stars(props) {\n\n    const rated = !(!props.rating && props.rating !== 0);\n    const percent = rated ?\n        `${(props.rating / 5) * 100}%`:\n        '0';\n    const ratingStyles = {\n        'clipPath': `polygon(0 0, ${percent} 0, ${percent} 100%, 0 100%)`\n    }\n    const titleText = rated ? `${props.rating} stars` : 'No rating available';\n    \n    return (\n        <div title={titleText}>\n            <StarsWrap role=\"presentation\" rated={rated}>\n                <span>☆ ☆ ☆ ☆ ☆</span>\n                <span style={ratingStyles}>★ ★ ★ ★ ★</span>\n            </StarsWrap>\n        </div>\n    );\n}\n\nexport default Stars;","import React from 'react';\nimport styled from 'styled-components';\nimport Stars from './stars';\n\nconst Tile = styled.div`\n    display: flex;\n    flex-direction: column;\n    gap: .5rem;\n    align-items: center;\n`;\n\nconst BookTitle = styled.h2`\n    margin: 0;\n    font-size: 1rem;\n    font-family: var(--font-family-title, inherit);\n`;\n\nconst BookSubTitle = styled.p`\n    margin: 0;\n    font-size : 85%;\n    text-transform: uppercase;\n`;\n\nconst BookThumbnail = styled.img`\n    margin-top: auto;\n    height: 192px;\n    width: auto;\n    max-width: 100%;\n    object-fit: contain;\n    object-fit-position: bottom;\n`\n\n\nfunction BookTile({book}) {\n\n    const {title, subtitle, averageRating, ratingsCount, imageLinks} = book.volumeInfo;\n    const thumbnail = imageLinks?.thumbnail || null;\n\n    return (\n        <Tile>\n            <BookTitle>{ title }</BookTitle>\n            <BookSubTitle>{ subtitle }</BookSubTitle>\n            { thumbnail && <BookThumbnail src={thumbnail} alt={`Book Cover for ${title}`}/> }\n            <Stars rating={averageRating} ratings={ratingsCount}/>\n        </Tile>\n    )\n}\n\nexport default BookTile;","import React from 'react';\nimport styled from 'styled-components';\n\nimport { BookSearchContext } from '../context/book-search';\nimport { Button } from '../styled-components/buttons';\n\nconst LoadMoreEl = styled.div`\n    display: flex;\n    justify-content: center;\n    margin: 2rem auto;\n`\n\nfunction LoadMore(props){\n    return (\n        <LoadMoreEl>\n            <BookSearchContext.Consumer>\n                { (value) => {\n                    const {results, totalResults, loadMore} = value;\n                    if (results?.length && results.length < totalResults) {\n                        return (\n                            <Button \n                                onClick={loadMore} \n                                type=\"button\"\n                            >Load More</Button>\n                        );\n                    }\n                }}\n            </BookSearchContext.Consumer>\n        </LoadMoreEl>\n    );\n}\n\nexport default LoadMore;\n","import React from 'react';\nimport styled from 'styled-components';\n\nimport { BookSearchContext } from '../context/book-search';\n\nimport BookTile from './book-tile';\nimport LoadMore from './load-more';\n\nconst Container = styled.div`\n    width: 100%;\n    padding: 1rem 5%;\n    max-width: 110rem;\n`;\n\nconst BookTiles = styled.div`\n    margin: 2rem 0 0;\n    display: grid;\n    grid-template-columns: repeat(auto-fit,minmax(280px,1fr));\n    gap: 1rem;\n    text-align: center;\n`;\n\nconst ResultsText = styled.div`\n    text-align: center;\n`;\nconst NoResultsText = styled.div`\n    font-size: 80%;\n    text-align: center;\n    font-style: italic;\n`;\n\nfunction SearchResults(props) {\n\n    const listResults = books => {\n        return books?.map((book,index) => <BookTile key={index} book={book} />);\n    }\n\n    return (\n        <Container>\n            <BookSearchContext.Consumer>\n                { ({results, totalResults}) => {\n                    if (results?.length > 0) {\n                        return (\n                            <div>\n                                <ResultsText>Showing: {results.length} of {totalResults}</ResultsText>\n                                <BookTiles>\n                                    { listResults(results) }\n                                </BookTiles>\n                                <LoadMore />\n                            </div>\n                        )\n                    }  else {\n                        return <NoResultsText>Nothing to display</NoResultsText>;\n                    }\n                }}\n            </BookSearchContext.Consumer>\n        </Container>\n    );\n}\n\nexport default SearchResults;","import React from 'react';\nimport styled from 'styled-components';\n\n// Context\nimport { BookSearchContextProvider } from './context/book-search';\n\n// Components\nimport Footer  from './components/footer';\nimport SearchBar from './components/search-bar';\nimport SearchResults from './components/search-results';\n\n// Styled components\nimport { Container, FlexContainer } from './styled-components/containers';\n\nconst Main = styled(FlexContainer)`\n  justify-content: flex-start;\n  align-items: center;\n`;\n\nconst H1 = styled.h1`\n  font-family: var(--font-family-title);\n`;\n\nconst AppBody = styled.div`\n  padding-top: 2rem;\n  display:flex;\n  flex-direction: column;\n  height: 100vh;\n  > .main {\n      flex: 1 1 auto;\n  }\n  > footer {\n      flex: 0 0 auto;\n  }\n`;\n\nfunction App() {\n\n  return (\n    <AppBody>\n      <Main className=\"main\" vertical>\n        <BookSearchContextProvider>\n          <Container>\n            <H1>Google Books Search</H1>\n            <SearchBar />\n          </Container>\n          <SearchResults />\n        </BookSearchContextProvider>\n      </Main>\n      <Footer />\n    </AppBody>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}